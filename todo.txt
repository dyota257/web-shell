[ ] convert processing to server side